"use strict";var seinfeldApp=angular.module("seinfeldApp",["ngResource","ngSanitize"]);seinfeldApp.value("appName","Seinfeld Quotes"),seinfeldApp.value("backgroundColors",["255,153,0","50,153,187","188,188,188"]),seinfeldApp.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/home.html",controller:"homeCtrl"}).when("/search",{templateUrl:"views/search.html",controller:"searchCtrl"}).otherwise({redirectTo:"/"})}]),seinfeldApp.factory("Quotes",["$http","$q",function(a,b){var c="/api/quotes",d={},e="";return d.setAuthor=function(a){e=a},d.getAuthor=function(){return e},d.getAll=function(){var d=b.defer();return a({method:"GET",url:c,params:{author:e}}).success(function(a){d.resolve(a)}),d.promise},d.authors={0:"Jerry",1:"George",2:"Elaine",3:"Kramer"},d}]),seinfeldApp.controller("homeCtrl",["$rootScope","$scope","Quotes",function(a,b,c){b.authors=c.authors,b.selectionMenuOn=!1,b.showRefresh=!0,b.dataLoaded=!1,b.backgroundLoaded=!1,b.getQuotes=function(){b.dataLoaded=!1,b.backgroundLoaded=!1,a.$broadcast("initBg"),c.getAll().then(function(a){b.quotes=a,b.random=d(a),b.dataLoaded=!0})},b.updateAuthor=function(a){c.setAuthor(a)},b.isCurrentAuthor=function(a){return a===c.getAuthor()},b.toggleSelectionMenu=function(){b.selectionMenuOn=!b.selectionMenuOn},a.$on("backgroundLoaded",function(){b.$apply(function(){b.backgroundLoaded=!0})});var d=function(a){if(!a.length)return!1;var b=Math.floor(Math.random()*a.length);return a[b]};b.getQuotes()}]),seinfeldApp.controller("searchCtrl",["$scope",function(a){a.ok=""}]),seinfeldApp.directive("stretch",["$rootScope",function(a){return{restrict:"A",link:function(b,c){var d=$(".bg"),e=2,f=function(){var a=Math.floor(Math.random()*e),b=$(".content-container blockquote");d.css({opacity:0}),b.css({opacity:0}),$(c).backstretch("https://s3-us-west-1.amazonaws.com/seinfeld-quotes/"+a+".jpg")};$(window).on("backstretch.after",function(){a.$broadcast("backgroundLoaded"),d.animate({opacity:1});var b=$(".content-container blockquote");b.delay(400).animate({opacity:1})}),b.$on("initBg",function(){f()})}}}]),seinfeldApp.directive("randomColor",["backgroundColors",function(a){return{restrict:"A",link:function(b,c){var d=$(c),e={quote:d.find("blockquote p"),arrow:d.find("blockquote .speak-arrow"),image:d.find("blockquote .author-image"),overlay:$(".overlay"),body:$("body")},f=function(){var b=a,c=Math.floor(Math.random()*b.length),d=b[c];e.quote.css({"background-color":"rgba("+d+",0.5)"}),e.arrow.css({"border-top-color":"rgba("+d+",0.5)"}),e.image.css({"background-color":"rgba("+d+",0.5)"}),e.overlay.css({"background-color":"rgba("+d+",0.5)"}),e.body.css({"background-color":"rgba("+d+",1)"})};b.$on("initBg",function(){f()})}}}]);